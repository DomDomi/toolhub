<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Brot/Steak fertig? â€“ Timer + Gargrad-Kurve</title>
  <style>
    :root{
      --bg:#0b0f17; --card:#121a27; --text:#e9eef7; --muted:#9fb0c7; --accent:#4da3ff;
      --border: rgba(255,255,255,.10);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
    .wrap{max-width:1120px;margin:0 auto;padding:18px}
    h1{font-size:1.5rem;margin:8px 0 4px}
    .sub{color:var(--muted);margin:0 0 14px;line-height:1.35}
    .grid{display:grid;grid-template-columns:400px 1fr;gap:14px;align-items:start}
    @media (max-width: 980px){ .grid{grid-template-columns:1fr;} }
    .card{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:14px}
    label{display:block;font-size:.92rem;margin:10px 0 6px;color:var(--muted)}
    input,select,button{font:inherit}
    input[type="number"], select{
      width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--border);
      background:rgba(255,255,255,.04);color:var(--text)
    }
    input[type="range"]{width:100%}
    .row{display:flex;gap:10px}
    .row > *{flex:1}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button{
      padding:10px 12px;border-radius:12px;border:1px solid var(--border);
      background:rgba(255,255,255,.06);color:var(--text);cursor:pointer
    }
    button.primary{border-color:rgba(77,163,255,.35);background:rgba(77,163,255,.16)}
    button:disabled{opacity:.55;cursor:not-allowed}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid var(--border);font-variant-numeric:tabular-nums}
    .kpi{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .big{font-size:1.15rem;font-weight:800;margin:6px 0 2px}
    .hint{color:var(--muted);margin:0;line-height:1.35}
    canvas{width:100%!important;height:460px!important}
    .small{color:var(--muted);font-size:.92rem;line-height:1.35;margin-top:10px}
    details{margin-top:10px}
    summary{cursor:pointer;color:var(--muted)}
    .mono{font-variant-numeric:tabular-nums}
    .warn{color:#ffd166}
  </style>
</head>

<body>
<div class="wrap">
  <h1>Wann ist mein Brot/Steak fertig?</h1>
  <p class="sub">
    WÃ¤hle <b>Steak</b> oder <b>Brot</b>. Das Tool nutzt Ziel-<b>Kerntemperaturen</b> (robust) und zeigt eine
    <b>Soll-Kurve</b> plus <b>Live-Kurve</b> (Stoppuhr). Zeiten sind immer nur SchÃ¤tzung â€“ am genauesten ist ein Thermometer.
  </p>

  <div class="grid">
    <!-- Controls -->
    <div class="card">
      <label for="food">ğŸ½ï¸ Lebensmittel</label>
      <select id="food">
        <option value="steak" selected>Steak (Rind, ganze StÃ¼cke)</option>
        <option value="bread">Brot (Laib/BrÃ¶tchen)</option>
      </select>

      <label for="target">ğŸ¯ Ziel</label>
      <select id="target"></select>

      <div class="row">
        <div>
          <label for="t0">ğŸŒ¡ï¸ Start-Kerntemp (Â°C)</label>
          <input id="t0" type="number" min="0" max="40" step="0.5" value="6" />
        </div>
        <div>
          <label for="tenv">ğŸ”¥ Umgebung (Â°C)</label>
          <input id="tenv" type="number" min="80" max="300" step="5" value="200" />
        </div>
      </div>

      <div class="row">
        <div>
          <label for="size">ğŸ“ GrÃ¶ÃŸe</label>
          <select id="size">
            <option value="steak_2.5cm" selected>Steak ~2,5 cm dick</option>
            <option value="steak_4cm">Steak ~4,0 cm dick</option>
            <option value="bread_750g">Brot ~750 g</option>
            <option value="bread_1000g">Brot ~1000 g</option>
            <option value="custom">Benutzerdefiniert</option>
          </select>
        </div>
        <div id="customSizeWrap" style="display:none">
          <label id="customSizeLabel" for="customSize" style="margin-top:10px">Wert</label>
          <input id="customSize" type="number" min="1" max="10" step="0.1" value="2.5" />
        </div>
      </div>

      <label for="method">ğŸ³ Methode (fÃ¼r das Modell)</label>
      <select id="method">
        <option value="pan" selected>Pfanne/Grill (direkt, schneller)</option>
        <option value="oven">Ofen (indirekt, langsamer)</option>
        <option value="sousvide">Niedrig/gleichmÃ¤ÃŸig (sehr langsam)</option>
      </select>

      <label for="carry">â™¨ï¸ Carryover (Â°C) nach dem Herausnehmen</label>
      <input id="carry" type="number" min="0" max="10" step="0.5" value="3" />
      <p class="small">
        Carryover ist die Temperatur, die innen oft noch nachzieht. Bei Steak sind ein paar Â°C Ã¼blich.
      </p>

      <details>
        <summary>âš™ï¸ Modell-Feintuning (optional)</summary>

        <label for="speed">â© Modell-Geschwindigkeit</label>
        <input id="speed" type="range" min="0.6" max="1.6" step="0.05" value="1.0" />
        <div class="kpi">
          <span class="pill">Faktor: <b id="speedVal" class="mono">1.00</b></span>
          <span class="pill">Chart-Update: <b class="mono">10 FPS</b></span>
        </div>

        <p class="small">
          Wenn dein Setup schneller/langsamer ist (Pfanne heiÃŸer, Deckel drauf, kleineres Steak, kleinerer Laib),
          passe den Faktor an.
        </p>
      </details>

      <div class="btns">
        <button id="start" class="primary">â–¶ï¸ Start</button>
        <button id="pause" disabled>â¸ï¸ Pause</button>
        <button id="reset">â†©ï¸ Reset</button>
      </div>

      <div class="kpi">
        <span class="pill">â±ï¸ <b id="sw" class="mono">00:00.0</b></span>
        <span class="pill">ğŸ“ Status: <b id="status">â€”</b></span>
      </div>

      <p class="small warn" id="safety"></p>
    </div>

    <!-- Chart -->
    <div class="card">
      <div class="big" id="headline">â€”</div>
      <p class="hint" id="detail">â€”</p>
      <canvas id="chart"></canvas>
      <p class="small">
        FarbbÃ¤nder = Temperatur-Zonen. Blau = Soll-Kurve, Pink = Live-Kurve.
      </p>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script>
  // -----------------------------
  // Targets (Â°C) from commonly used doneness ranges
  // (We use midpoints / typical targets)
  // -----------------------------
  const TARGETS = {
    steak: [
      { id:"bleu",   label:"Bleu (sehr rare) â€“ ca. 46Â°C", target:46, band:[43,49] },
      { id:"rare",   label:"Rare â€“ ca. 52Â°C",            target:52, band:[49,54] },
      { id:"mrare",  label:"Medium Rare â€“ ca. 56Â°C",     target:56, band:[54,57] },
      { id:"medium", label:"Medium â€“ ca. 60Â°C",          target:60, band:[57,63] },
      { id:"mwell",  label:"Medium Well â€“ ca. 66Â°C",     target:66, band:[63,68] },
      { id:"well",   label:"Well Done â€“ ca. 71Â°C",       target:71, band:[68,75] },
    ],
    bread: [
      { id:"loaf190", label:"Brot meist fertig â€“ ca. 88Â°C (â‰ˆ190Â°F)", target:88, band:[86,90] },
      { id:"lean205", label:"Lean / krÃ¤ftiger gebacken â€“ ca. 96Â°C (â‰ˆ205Â°F)", target:96, band:[94,98] },
      { id:"sourdough", label:"Sourdough oft 96â€“98Â°C", target:97, band:[96,98] },
    ]
  };

  // Background zones (y-ranges) for each food type
  function zonesForFood(food){
    if (food === "steak"){
      return [
        { name:"Unter (roh)",  y0:0,  y1:43,  color:"rgba(77,163,255,0.10)" },
        { name:"Bleu",         y0:43, y1:49,  color:"rgba(77,163,255,0.14)" },
        { name:"Rare",         y0:49, y1:54,  color:"rgba(77,163,255,0.18)" },
        { name:"Med Rare",     y0:54, y1:57,  color:"rgba(77,163,255,0.22)" },
        { name:"Medium",       y0:57, y1:63,  color:"rgba(77,163,255,0.26)" },
        { name:"Med Well",     y0:63, y1:68,  color:"rgba(77,163,255,0.30)" },
        { name:"Well+",        y0:68, y1:90,  color:"rgba(77,163,255,0.34)" },
      ];
    }
    // bread
    return [
      { name:"Unterbacken", y0:0,  y1:86, color:"rgba(77,163,255,0.10)" },
      { name:"Fertig (typ.)", y0:86, y1:90, color:"rgba(77,163,255,0.20)" },
      { name:"Sehr durch / lean", y0:90, y1:98, color:"rgba(77,163,255,0.28)" },
      { name:"Sehr heiÃŸ", y0:98, y1:110, color:"rgba(77,163,255,0.34)" },
    ];
  }

  // -----------------------------
  // Model: Newton-style heating curve toward Tenv
  // T(t) = Tenv - (Tenv - T0) * exp(-k t)
  // k depends on size and method; factor slider adjusts.
  // -----------------------------
  function kFromInputs({food, method, sizeValue, speedFactor}){
    // base k in 1/min for a reference size
    // (chosen to "feel" plausible; user can tune speed slider)
    let k = 0.18; // baseline

    if (food === "steak"){
      // sizeValue = thickness in cm
      const thickness = Math.max(1.0, sizeValue);
      // diffusion-ish scaling ~ 1 / thickness^2
      k = 0.18 * (2.5*2.5) / (thickness*thickness);
      if (method === "pan") k *= 1.25;
      if (method === "oven") k *= 0.85;
      if (method === "sousvide") k *= 0.35;
    } else {
      // bread sizeValue = weight in g (approx)
      const w = Math.max(200, sizeValue);
      // scaling ~ 1 / (linear size^2) ; linear size ~ w^(1/3) -> 1 / w^(2/3)
      k = 0.10 * Math.pow(750 / w, 2/3);
      if (method === "oven") k *= 1.0;
      if (method === "pan") k *= 0.7;      // "pan" not typical for bread, but keep option
      if (method === "sousvide") k *= 0.25;
    }

    return k * speedFactor;
  }

  function tempAtTimeMin({t0, tenv, k, tMin}){
    return tenv - (tenv - t0) * Math.exp(-k * tMin);
  }

  function timeToTemp({t0, tenv, k, target}){
    // Solve target = tenv - (tenv - t0) e^{-k t}
    // e^{-k t} = (tenv - target)/(tenv - t0)
    const num = (tenv - target);
    const den = (tenv - t0);
    if (den <= 0) return Infinity;
    const r = num / den;
    if (r <= 0) return 0;
    if (r >= 1) return Infinity;
    return -Math.log(r) / k;
  }

  function fmtTime(min){
    const sec = Math.max(0, min*60);
    const m = Math.floor(sec/60);
    const s = Math.floor(sec%60);
    return `${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;
  }

  // -----------------------------
  // UI
  // -----------------------------
  const elFood = document.getElementById('food');
  const elTarget = document.getElementById('target');
  const elT0 = document.getElementById('t0');
  const elTenv = document.getElementById('tenv');
  const elSize = document.getElementById('size');
  const elCustomWrap = document.getElementById('customSizeWrap');
  const elCustomSize = document.getElementById('customSize');
  const elCustomLabel = document.getElementById('customSizeLabel');
  const elMethod = document.getElementById('method');
  const elCarry = document.getElementById('carry');
  const elSpeed = document.getElementById('speed');
  const elSpeedVal = document.getElementById('speedVal');

  const elHeadline = document.getElementById('headline');
  const elDetail = document.getElementById('detail');
  const elSafety = document.getElementById('safety');

  const btnStart = document.getElementById('start');
  const btnPause = document.getElementById('pause');
  const btnReset = document.getElementById('reset');
  const elSw = document.getElementById('sw');
  const elStatus = document.getElementById('status');

  function getSelectedTarget(food){
    const list = TARGETS[food];
    return list.find(x => x.id === elTarget.value) || list[0];
  }

  function setTargetOptions(){
    const food = elFood.value;
    elTarget.innerHTML = "";
    for (const t of TARGETS[food]){
      const opt = document.createElement('option');
      opt.value = t.id;
      opt.textContent = t.label;
      elTarget.appendChild(opt);
    }
    // default selections
    elTarget.value = (food === "steak") ? "mrare" : "loaf190";

    // size presets
    elSize.innerHTML = "";
    if (food === "steak"){
      addSizeOpt("steak_2.5cm","Steak ~2,5 cm dick");
      addSizeOpt("steak_4cm","Steak ~4,0 cm dick");
      addSizeOpt("custom","Benutzerdefiniert");
      elSize.value = "steak_2.5cm";
      elCustomLabel.textContent = "Dicke (cm)";
      elCustomSize.value = "2.5";
      // env defaults
      elTenv.value = "200";
      elT0.value = "6";
      elMethod.value = "pan";
      elCarry.value = "3";
      elSafety.textContent = "Hinweis: FÃ¼r Sicherheit bei Rind-Steaks nennt die USDA 63Â°C (145Â°F) + 3 Minuten Ruhezeit. Garstufen darunter sind kulinarisch Ã¼blich, aber nicht fÃ¼r alle Risikogruppen geeignet.";
    } else {
      addSizeOpt("bread_750g","Brot ~750 g");
      addSizeOpt("bread_1000g","Brot ~1000 g");
      addSizeOpt("custom","Benutzerdefiniert");
      elSize.value = "bread_750g";
      elCustomLabel.textContent = "Gewicht (g)";
      elCustomSize.value = "750";
      // env defaults
      elTenv.value = "220";
      elT0.value = "24";
      elMethod.value = "oven";
      elCarry.value = "0";
      elSafety.textContent = "Brot: Kerntemperatur ist ein guter Indikator (z.B. ~88Â°C fÃ¼r viele Brote, ~96â€“98Â°C bei Sourdough/lean), aber Kruste/Farbe zÃ¤hlen ebenfalls.";
    }
    syncCustomVisibility();
    onInputsChanged();
  }

  function addSizeOpt(val,label){
    const opt = document.createElement('option');
    opt.value = val;
    opt.textContent = label;
    elSize.appendChild(opt);
  }

  function sizeValueFromPreset(food){
    const v = elSize.value;
    if (v === "custom") return Math.max(1, Number(elCustomSize.value));
    if (food === "steak"){
      if (v === "steak_2.5cm") return 2.5;
      if (v === "steak_4cm") return 4.0;
      return 2.5;
    } else {
      if (v === "bread_750g") return 750;
      if (v === "bread_1000g") return 1000;
      return 750;
    }
  }

  function syncCustomVisibility(){
    const isCustom = (elSize.value === "custom");
    elCustomWrap.style.display = isCustom ? "block" : "none";
  }

  // -----------------------------
  // Chart + background bands plugin (stable)
  // -----------------------------
  const bandsPlugin = {
    id: 'bands',
    beforeDatasetsDraw(chart){
      const zones = chart.options?.plugins?.bands?.zones;
      if (!zones) return;
      const { ctx, chartArea, scales } = chart;
      if (!chartArea) return;

      const y = scales.y;
      ctx.save();
      for (const z of zones){
        const top = y.getPixelForValue(z.y1);
        const bot = y.getPixelForValue(z.y0);
        ctx.fillStyle = z.color;
        ctx.fillRect(chartArea.left, top, chartArea.right-chartArea.left, bot-top);
      }
      ctx.restore();
    }
  };

  const chart = new Chart(document.getElementById('chart'), {
    type:'line',
    data:{
      datasets:[
        { // Soll curve
          label:"Soll-Kurve (Kerntemp)",
          data:[],
          parsing:false,
          borderWidth:2,
          pointRadius:0,
          tension:0.25,
          borderColor:"rgba(77,163,255,0.95)"
        },
        { // Live curve
          label:"Live-Kurve (Stoppuhr)",
          data:[],
          parsing:false,
          borderWidth:2,
          pointRadius:0,
          tension:0.25,
          borderColor:"rgba(255,92,122,0.95)"
        },
        { // Live point
          label:"Live-Punkt",
          data:[],
          parsing:false,
          showLine:false,
          pointRadius:4,
          borderWidth:0,
          pointBackgroundColor:"rgba(255,92,122,0.95)"
        }
      ]
    },
    options:{
      responsive:true,
      maintainAspectRatio:false,
      animation:false,
      plugins:{
        legend:{ display:true, labels:{ color:"rgba(233,238,247,.9)" } },
        tooltip:{
          callbacks:{
            title:(items)=> `Zeit: ${fmtTime(items?.[0]?.parsed?.x ?? 0)}`,
            label:(item)=>{
              const t = item.parsed.y;
              return `${item.dataset.label}: ${t.toFixed(1)}Â°C`;
            }
          }
        },
        bands:{ zones:null }
      },
      scales:{
        x:{
          type:'linear',
          title:{ display:true, text:'Zeit', color:"rgba(233,238,247,.9)" },
          ticks:{ color:"rgba(159,176,199,.9)", callback:(v)=>fmtTime(v) },
          grid:{ color:"rgba(255,255,255,.06)" },
          min:0, max:20
        },
        y:{
          title:{ display:true, text:'Kerntemperatur (Â°C)', color:"rgba(233,238,247,.9)" },
          ticks:{ color:"rgba(159,176,199,.9)", callback:(v)=>`${v}Â°C` },
          grid:{ color:"rgba(255,255,255,.06)" },
          min:0, max:110
        }
      }
    },
    plugins:[bandsPlugin]
  });

  // Build dataset (soll) and (live) from current params
  function buildSollCurve({food, t0, tenv, k, target, carry}){
    // We show until target (or target - carry) is reached, plus a margin
    const pullTemp = (food === "steak") ? Math.max(0, target - Math.max(0, carry)) : target;
    const tReach = timeToTemp({t0, tenv, k, target: pullTemp});
    const maxX = Math.max(8, Math.min(90, (Number.isFinite(tReach) ? tReach*1.35 : 30)));

    // step: 5 sec
    const stepMin = 5/60;
    const data = [];
    for (let t=0; t<=maxX+1e-9; t += stepMin){
      const temp = tempAtTimeMin({t0, tenv, k, tMin:t});
      data.push({x:Number(t.toFixed(4)), y:Number(temp.toFixed(3))});
    }
    return { data, maxX, pullTemp, tReach };
  }

  function updateUI(stopwatchMin){
    const food = elFood.value;
    const targetObj = getSelectedTarget(food);

    const t0 = Math.max(0, Number(elT0.value));
    const tenv = Math.max(1, Number(elTenv.value));
    const carry = Math.max(0, Number(elCarry.value));
    const speedFactor = Number(elSpeed.value);
    elSpeedVal.textContent = speedFactor.toFixed(2);

    const sizeVal = sizeValueFromPreset(food);
    const method = elMethod.value;

    const k = kFromInputs({food, method, sizeValue:sizeVal, speedFactor});
    const { data:soll, maxX, pullTemp, tReach } = buildSollCurve({
      food, t0, tenv, k, target: targetObj.target, carry
    });

    // Y-range heuristics
    const yMin = Math.max(0, Math.min(t0, targetObj.band?.[0] ?? targetObj.target) - 10);
    const yMax = Math.min(130, Math.max(targetObj.target, tenv, (food==="bread"?110:90)) + 10);

    chart.options.scales.x.max = maxX;
    chart.options.scales.y.min = yMin;
    chart.options.scales.y.max = yMax;

    // background zones
    chart.options.plugins.bands.zones = zonesForFood(food);

    // set soll curve
    chart.data.datasets[0].data = soll;

    // live curve
    if (Number.isFinite(stopwatchMin)){
      const live = [];
      for (const pt of soll){
        if (pt.x <= stopwatchMin) live.push(pt);
        else break;
      }
      const liveTemp = tempAtTimeMin({t0, tenv, k, tMin: stopwatchMin});
      chart.data.datasets[1].data = live;
      chart.data.datasets[2].data = [{x: stopwatchMin, y: liveTemp}];

      const pull = (food === "steak") ? (targetObj.target - carry) : targetObj.target;
      const status =
        (food==="steak" && liveTemp >= pull) ? `Rausnehmen (Pull ${pull.toFixed(1)}Â°C)` :
        (liveTemp >= targetObj.target) ? "Ziel erreicht" :
        `Noch ${Math.max(0, (targetObj.target - liveTemp)).toFixed(1)}Â°C bis Ziel`;

      elStatus.textContent = status;
    } else {
      chart.data.datasets[1].data = [];
      chart.data.datasets[2].data = [];
      elStatus.textContent = "â€”";
    }

    // Headline/detail
    const targetText = `${targetObj.target.toFixed(0)}Â°C`;
    const pullText = (food==="steak")
      ? `â€¢ Pull (Ziel âˆ’ Carryover): ${(targetObj.target - carry).toFixed(0)}Â°C`
      : "";

    const estText = (Number.isFinite(tReach) && tReach < 1e6)
      ? `â€¢ grob nach ~${fmtTime(tReach)}`
      : "â€¢ Zeit schwer schÃ¤tzbar (PrÃ¼fe Parameter)";

    elHeadline.textContent = `${food==="steak" ? "Steak" : "Brot"} â€“ Ziel: ${targetText} ${pullText} ${estText}`;
    elDetail.textContent =
      `Start ${t0.toFixed(1)}Â°C â†’ Umgebung ${tenv.toFixed(0)}Â°C â€¢ Methode: ${method} â€¢ GrÃ¶ÃŸe: ${food==="steak" ? (sizeVal.toFixed(1)+" cm") : (Math.round(sizeVal)+" g")} â€¢ Modell k=${k.toFixed(3)}/min`;

    chart.update('none');
  }

  // -----------------------------
  // Stopwatch (throttled chart updates)
  // -----------------------------
  let running = false;
  let startTs = 0;
  let elapsedMs = 0;
  let rafId = null;
  let lastChartUpdate = 0;
  const CHART_FPS = 10;

  function renderStopwatch(){
    const ms = elapsedMs + (running ? (performance.now() - startTs) : 0);
    const totalSec = ms / 1000;

    const m = Math.floor(totalSec / 60);
    const s = Math.floor(totalSec % 60);
    const tenths = Math.floor((totalSec - Math.floor(totalSec)) * 10);
    elSw.textContent = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}.${tenths}`;

    const now = performance.now();
    if (now - lastChartUpdate >= (1000 / CHART_FPS)) {
      lastChartUpdate = now;
      updateUI(totalSec / 60);
    }

    rafId = requestAnimationFrame(renderStopwatch);
  }

  function start(){
    if (running) return;
    running = true;
    startTs = performance.now();
    btnStart.disabled = true;
    btnPause.disabled = false;
    lastChartUpdate = 0;
    rafId = requestAnimationFrame(renderStopwatch);
  }
  function pause(){
    if (!running) return;
    running = false;
    elapsedMs += performance.now() - startTs;
    btnStart.disabled = false;
    btnPause.disabled = true;
    if (rafId) cancelAnimationFrame(rafId);
    rafId = null;
    updateUI((elapsedMs/1000)/60);
  }
  function reset(){
    running = false;
    elapsedMs = 0;
    btnStart.disabled = false;
    btnPause.disabled = true;
    if (rafId) cancelAnimationFrame(rafId);
    rafId = null;
    elSw.textContent = "00:00.0";
    updateUI(null);
  }

  // -----------------------------
  // Events
  // -----------------------------
  function onInputsChanged(){
    if (running) return;
    updateUI(null);
  }

  elFood.addEventListener('change', () => {
    elapsedMs = 0;
    elSw.textContent = "00:00.0";
    setTargetOptions();
  });

  elSize.addEventListener('change', () => {
    syncCustomVisibility();
    onInputsChanged();
  });

  function syncCustomVisibility(){
    const isCustom = (elSize.value === "custom");
    elCustomWrap.style.display = isCustom ? "block" : "none";
    const food = elFood.value;
    elCustomLabel.textContent = (food === "steak") ? "Dicke (cm)" : "Gewicht (g)";
    if (food === "steak" && isCustom && !elCustomSize.value) elCustomSize.value = "2.5";
    if (food === "bread" && isCustom && !elCustomSize.value) elCustomSize.value = "750";
  }

  [elTarget, elT0, elTenv, elCustomSize, elMethod, elCarry, elSpeed].forEach(el => {
    el.addEventListener('input', onInputsChanged);
    el.addEventListener('change', onInputsChanged);
  });

  btnStart.addEventListener('click', start);
  btnPause.addEventListener('click', pause);
  btnReset.addEventListener('click', reset);

  // -----------------------------
  // Init
  // -----------------------------
  setTargetOptions();
  updateUI(null);
</script>
</body>
</html>
